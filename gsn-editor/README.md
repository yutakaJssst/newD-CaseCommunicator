# GSN Editor

GSN (Goal Structuring Notation) 図を作成・編集するためのWebアプリケーション。

## 🎯 概要

このプロジェクトは、既存のD-Case Communicatorをモダンな技術スタックで再実装したものです。
直感的な操作でGSN図を作成でき、リッチテキスト編集やURLリンクにも対応しています。

## ✨ 主な機能

- **8種類のGSNノード**: Goal, Strategy, Context, Evidence, Assumption, Justification, Undeveloped, Module
- **モジュール機能**: 複雑な図を階層化して管理
  - Goalを右クリック→「モジュールにする」でサブツリーを別ダイアグラムに分離
  - サイドバーから直接空のModuleノードを配置可能
  - モジュール内のトップGoalの内容が自動的に親ダイアグラムに反映
  - パンくずリストでモジュール間を移動
- **直感的な操作**: ドラッグ&ドロップでノード配置・移動
- **リッチテキスト編集**: 太字、斜体、下線、フォントサイズ、URLリンク対応
- **複数選択**: Ctrl+クリックで複数ノードを選択・一括移動
- **GSN標準準拠**: ノードタイプに基づく自動的なリンク接続と矢印スタイル
- **自動保存**: LocalStorageに自動保存（モジュール階層も含む）
- **Undo/Redo**: 操作履歴の管理（Ctrl+Z / Ctrl+Y）
- **JSONエクスポート/インポート**: 図のデータを保存・共有

## 🚀 クイックスタート

### 必要要件
- Node.js 18+
- npm

### インストール

```bash
npm install
```

### 開発サーバーの起動

```bash
npm run dev
```

ブラウザで `http://localhost:5173/` を開く

### ビルド

```bash
npm run build
```

## 📖 使い方

### ノードの追加

1. 左サイドバーからノードタイプを選択
2. キャンバスをクリックしてノードを配置

### ノードの編集

- **移動**: ノードをドラッグ
- **編集**: ノードをダブルクリック
- **サイズ変更**: ノードを選択して、4隅のハンドルをドラッグ
- **削除**: ノードを右クリック → 「削除」

### リンクの追加

1. ノードを右クリック → 「子ノードにリンク」
2. 親ノード（現在のノード）がハイライト表示
3. 子ノードをクリック

### モジュール機能

**既存のGoalからモジュール化:**
1. Goalノードを右クリック → 「モジュールにする」
2. そのGoal以下のサブツリーが別ダイアグラムになる
3. 元の位置にModuleノードが配置される

**空のモジュール作成:**
1. サイドバーから「モジュール」を選択
2. キャンバスをクリックして配置
3. Moduleノードをダブルクリックして内部を開く
4. モジュール内でGSN図を作成

**モジュール間の移動:**
- Moduleノードをダブルクリック → モジュール内を開く
- ヘッダーのパンくずリストをクリック → 親ダイアグラムに戻る
- モジュール内で編集した内容は自動保存され、親に戻ると反映される

### 複数選択

- **Ctrl+クリック**: 複数ノードを選択
- **ドラッグ**: 選択したノードを一括移動

### キャンバス操作

- **パン**: 空白領域をドラッグ / Shift+ドラッグ / 中ボタンドラッグ
- **ズーム**: マウスホイール（Ctrl+ホイール）/ ヘッダーの +/- ボタン

### リッチテキスト編集

ノード編集モーダルで以下の書式が使用可能：

- **B**: 太字
- **I**: 斜体
- **U**: 下線
- **フォントサイズ**: 小/中/大/特大
- **🔗**: URLリンク（テキスト選択 → リンクボタン → URL入力）

### データの保存・読み込み

- **自動保存**: 編集内容は自動的にLocalStorageに保存
- **エクスポート**: ヘッダー → 「エクスポート」→ JSON形式でダウンロード
- **インポート**: ヘッダー → 「インポート」→ JSONファイルを選択

## 📊 GSNノードタイプ

| ノード | 説明 | 形状 | 接続 |
|--------|------|------|------|
| **Goal** | 達成すべき目標 | 矩形 | 下に接続 |
| **Strategy** | ゴール分解の方針 | 平行四辺形 | 下に接続 |
| **Context** | 前提条件 | 角丸矩形 | 横に接続 |
| **Evidence** | ゴール達成の根拠 | 楕円 | 下に接続 |
| **Assumption** | 論証の仮定事項 | 楕円 (A) | 横に接続 |
| **Justification** | 戦略の正当性根拠 | 楕円 (J) | 横に接続 |
| **Undeveloped** | 未展開のゴール | ダイヤモンド | 下に接続 |
| **Module** | 別ダイアグラムへのリンク | フォルダ型 | 下に接続 |

## ⌨️ キーボードショートカット

| ショートカット | 機能 |
|----------------|------|
| **Ctrl+Z** | 元に戻す (Undo) |
| **Ctrl+Y** | やり直す (Redo) |
| **Ctrl+クリック** | 複数選択 |
| **Shift+ドラッグ** | パン操作 |
| **ESC** | リンク追加モードをキャンセル |

## 🏗️ 技術スタック

- **React 19.2.0** - UIフレームワーク
- **TypeScript 5.9.3** - 型安全性
- **Zustand 5.0.9** - 状態管理
- **Vite 7.2.4** - ビルドツール
- **SVG** - ネイティブ描画
